---
# Tool Policy Configuration
# Referenced at runtime by prompts and agents. Update here to affect all referencing prompts.

tools:
  preferred_shell: bash
  git: terminal
  file_operations: shell
  ci_operations: shell

auto_execution:
  default: disallowed
  exception: "Explicit user invocation (e.g., `/commit` prompt when user types `/commit`)"
  rules:
    - no_auto_commit: true
    - no_auto_push: true
    - safe_operations_allowed: "Analysis, dry-run, and informational operations may auto-execute"

shell_commands:
  git_status: "git status"
  git_diff: "git diff"
  git_add: "git add ."
  git_commit: 'git commit -m "<message>"'

avoid:
  - GUI git tools (GitKraken, SourceTree) for automated workflows
  - Interactive UI dialogs that block automation

rationale: "Terminal commands ensure consistent behavior across machines and avoid interactive UI dialogs that block automation."

# Compact machine-readable guardrails. Keep prose/details in the companion file
# referenced by `policy_details_path` below to avoid embedding long descriptions
# in runtime prompts.
guardrails:
  version: v1
  policy_details_path: .github/config/tool-policy-details.md
  commit_execution:
    {
      enf: require_explicit_invocation,
      note: "Never auto-commit. Only execute git commit when user explicitly invokes /commit prompt.",
    }
  push: { enf: disallow }
  api_access: { enf: disallow }
  arbitrary_commands:
    { enf: restrict, allowlist: [git_status, git_diff, git_log] }
  operations_beyond_branch: { enf: scope_branch }
  local_git_operations:
    {
      enf: allow,
      automated: true,
      allowlist: [git_status, git_diff, git_log, git_add, git_commit],
    }
  report_summary: { enf: require }
  warnings_and_decisions: { enf: escalate }
